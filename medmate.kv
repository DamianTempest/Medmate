ScreenManager:
    PageScreen:
    LoginScreen:
    SignUpScreen:
    NghtScreen:
    CommunityScreen:
    ResearchScreen:
    NewsScreen:
    PatientScreen:
    HomeScreen:
    ExtraScreen:
    ContactListScreen:
    PatientProfileScreen:
    EditPatientScreen:
    SymptomCheckerScreen:
    ChatScreen:
    DieticianScreen:
<PageScreen>:
    name:"page"
    canvas.before:
        Rectangle:
            source: "a.jpg"
            pos: self.pos
            size: self.size  
    BoxLayout:
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)                 
        Label:
            color:0, 0, 0
            text:"Welcome To Medate"
            font_size: dp(30)
            bold: True
            underline:True
            
        BoxLayout:
            orientation: "horizontal"
            spacing: dp(20)
            padding: dp(20)    
            Label:
                text:"Choose Category"
                color:0, 0, 0
                font_size: sp(24)
                pos_hint:{"center_y":.5}
                bold: True  
                underline:True 

        BoxLayout:
            orientation: "horizontal"
            spacing: dp(20)
            padding: dp(20)
            Button:
                background_color: 1, 1, 1, 0.5
                text:"Patient"
                color:0, 0, 0
                size_hint:.3, .3
                pos_hint:{"center_y":.5}
                bold: True
                on_press: app.root.current =  "signup"
            Button:
                background_color: 1, 1, 1, 0.5
                text:"Doctor"
                color:0, 0, 0
                size_hint:.3, .3
                pos_hint:{"center_y":.5}
                bold: True
                on_press: app.root.current =  "signup.doc"


<LoginScreen>:
    name:"login"
    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10
        canvas.before:
            Rectangle:
                source: "a.jpg"
                pos: self.pos
                size: self.size 
        Label:
            text:"Login"
            bold: True
            underline: True

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10
        TextInput:
            id: email
            hint_text: "Email"
            multiline: False

        TextInput:
            id: password
            hint_text: "Password"
            multiline: False
            password: True

        Label:
            id: error_label
            text: ""
            color: 1, 0, 0, 1  # Red for errors

        Button:
            text: "Login"
            on_press: root.validate_login()

        Button:
            text: "Go to Sign Up"
            on_press: app.root.current = "signup"
        Button:
            text: "Go Back"
            on_press: app.root.current = "page"


<SignUpScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        TextInput:
            id: email
            hint_text: "Email"
            multiline: False

        TextInput:
            id: password
            hint_text: "Password"
            multiline: False
            password: True

        Label:
            id: error_label
            text: ""
            color: 1, 0, 0, 1  # Red for errors

        Button:
            text: "Sign Up"
            on_press: root.validate_signup()

        Button:
            text: "Back to Login"
            on_press: app.root.current = "login"
        
        Button:
            text: "Go Back"
            on_press: app.root.current = "page"



<SignUpDocScreen>:
    name: "signup.doc"
    canvas.before:
        Rectangle:
            source: "w.jpg"
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        BoxLayout:              
            orientation: "vertical"
            spacing: dp(20)
            padding: dp(20) 
            TextInput:
                id: name
                hint_text: "First Name"
            TextInput:
                id: name
                hint_text: "Last Name"
            TextInput:
                id: email
                hint_text: "Email Address"
            TextInput:
                id: password
                hint_text: "Password"
                password: True
            Button:
                background_color: 1, 1, 1, 0.5
                text: "Create Account"
                on_press: app.root.current = "nun"
            Button:
                background_color: 1, 1, 1, 0.5
                text: "Login"
                on_press: app.root.current = "login.doc"   



<NghtScreen>:
    name:"nun"
    canvas.before:
        Rectangle:
            source: "se.jpg"
            pos: self.pos
            size: self.size 
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(20)
        Button:
            size_hint_x:0.1
            size_hint_y:0.1
            source: "L.jpg"
            pos: self.pos
            size: self.size
        Label:
            text: "Welcome to MedMate"
            font_size: sp(24)
            underline:True
            
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Community"
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "Community"
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Research"
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_release: app.root.current = "Research"
        Button:
            background_color: 1, 1, 1, 0.5
            text: "News"
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "News"
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Patients"
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "Patients"           
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Logout"
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "page"

<PatientsScreen>:
    name: "Patients"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        Label:
            text: "Patients"
            font_size: sp(24)
        RecycleView:
            id: patient_list_rv
            viewclass: "Button"
            RecycleBoxLayout:
                orientation: "vertical"
                default_size: None, dp(40)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                Button:
                    text: "Mr. Sam"
                    on_press: app.root.current = "chat.1"
                Button:
                    text: "Mrs. "
                    on_press: app.root.current = "chat.2"
                Button:
                    text: "Mr. Gunner"
                    on_press: app.root.current = "chat.3"
                Button:
                    text: "Back"
                    on_press: app.root.current = "nun"


<PatientschatScreen>:
    name: "chat.1"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(10)
        Label:
            text: "Chat with Mr. Smith"
            font_size: sp(24)
        Button:
            text: "Back"
            size_hint_x:0.1
            size_hint_y:0.1
            on_press:app.root.current="Patients"    
        ScrollView:
            Label:
                id: chat_messages
                text: "Chat messages will appear here..."
        BoxLayout:
            spacing: dp(10)
            TextInput:
                id: chat_input
                hint_text: "Type your message..."
            Button:
                text: "Send"
                on_press: root.send_message()
            Button:
                text:"Back"
                on_press:app.root.current="home"

            

<HomeScreen>:
    name: "home"
    canvas.before:
        Rectangle:
            source: "se.jpg"
            pos: self.pos
            size: self.size 
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(20)
        Button:
            size_hint_x:0.1
            size_hint_y:0.1
            source: "L.jpg"
            pos: self.pos
            size: self.size
            on_release:app.root.current = "Extra"
        Label:
            text: "Welcome to MedMate"
            color:0, 0, 0
            font_size: sp(24)
            underline:True
            bold:True
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Go to Contact List"
            color:0, 0, 0
            bold:True
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "contact_list"
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Patient Profile"
            color:0, 0, 0
            bold:True
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_release: app.root.current = "patientprofile"          
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Logout"
            color:0, 0, 0
            bold:True
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "login"
        

<ExtraScreen>:
    name:"Extra"
    text:"Extra Options"
    size_hint : (0.8, 0.4)
    auto_dismiss : False
    BoxLayout:
        orientation:'vertical' 
        spacing:20
        padding:20
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Editpatient"
            color:0, 0, 1
            size_hint: .5,None
            pos_hint:{"center_x":.4}
            on_press: app.root.current = "editpatient"
        Button:
            background_color: 1, 1, 1, 0.5
            text: "Sympt0ms Checker"
            color:0, 0, 1
            size_hint: .5,None
            pos_hint:{"center_x":.4}
            on_press: app.root.current = "Sym"
        Button:
            text: "Back"
            on_press: app.root.current = "home"
        
<ContactListScreen>:
    name: "contact_list"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        Label:
            text: "Contact List"
            font_size: sp(24)
        Button:
            background_color:0.6, 0, 1
            text: "Dr. Smith - Surgeon"
            color: 0, 0, 0
            on_press: app.root.current = "chat"
        Button:
            text: "Dr. Jane - Dietician"
            on_press: app.root.current = "Dietician"
        Button:
            text: "Dr. Joe - Pediatrician"
            on_press: app.root.current = "chat3"
        Button:
            text: "Back"
            on_press: app.root.current = "home"

<PatientProfileScreen>:
    name: "patientprofile"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Patient Profile Screen"
            font_size: 24
        Button:
            text: "Back"
            on_release: app.root.current = "home"
        Button:
            background_color: 1, 0, 0.6
            text: "Editpatient"
            color: 0.6, 0, 1
            size_hint: .5,None
            pos_hint:{"center_x":.5}
            on_press: app.root.current = "editpatient"
        
        

<EditPatientScreen>:
    name: "editpatient"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(20)

        Label:
            text: "Edit Patient Screen"
            font_size: sp(24)
            bold: True
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(10)

                TextInput:
                    id: name_input
                    hint_text: "Edit Name"
                    multiline: False
                    size_hint_y: None
                    height: dp(50)
                
                TextInput:
                    id: age_input
                    hint_text: "Edit Age"
                    multiline: False
                    size_hint_y: None
                    height: dp(50)
                    input_filter: "int"

                TextInput:
                    id: country_input
                    hint_text: "Edit Country"
                    multiline: False
                    size_hint_y: None
                    height: dp(50)
                
                TextInput:
                    id: medical_history_input
                    hint_text: "Edit Medical History"
                    multiline: True
                    size_hint_y: None
                    height: dp(100)
                
                TextInput:
                    id: current_medications_input
                    hint_text: "Edit Current Medications"
                    multiline: True
                    size_hint_y: None
                    height: dp(100)
                
                TextInput:
                    id: current_activities_input
                    hint_text: "Edit Current Activities"
                    multiline: True
                    size_hint_y: None
                    height: dp(100)

        BoxLayout:
            size_hint_y: None
            height: dp(50)
            spacing: dp(10)

            Button:
                text: "Save Changes"
                on_press:root.Save_Changes(self)

            Button:
                text: "Back to Home"
                on_release: app.root.current = "home"



<SymptomCheckerScreen>:
    name: "sym"
    BoxLayout:
        orientation: 'vertical'
        padding: dp(10)
        spacing: dp(10)
        Button:
            text: "Back"
            size_hint_x:0.1
            size_hint_y:0.1
            on_press:app.root.current="home"

        Label:
            text: "Enter your symptoms (e.g., fever, headache, fatigue):"
            size_hint_y: None
            height: dp(30)

        TextInput:
            id: symptom_input
            hint_text: "Type your symptoms here..."
            multiline: True
            size_hint_y: 0.4

        ProgressBar:
            id: progress_bar
            max: 100
            value: 0
            size_hint_y: None
            height: dp(10)

        Button:
            text: "Analyze Symptoms"
            size_hint_y: None
            height: dp(50)
            on_press: root.Analyze_Symptoms(self)
           

<ChatScreen>:
    name: "chat"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(10)
        Label:
            text: "Chat with Dr. Smith"
            font_size: sp(24)
        Button:
            text: "Back"
            size_hint_x:0.1
            size_hint_y:0.1
            on_press:app.root.current="contact_list"    
        ScrollView:
            Label:
                id: chat_messages
                text: "Chat messages will appear here..."
        BoxLayout:
            spacing: dp(10)
            TextInput:
                id: chat_input
                hint_text: "Type your message..."
            Button:
                text: "Send"
                on_press: root.send_message()

<ChatScreen>:
    name: "chat3"
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(10)
        Label:
            text: "Chat with Dr. Smith"
            font_size: sp(24)
        Button:
            text: "Back"
            size_hint_x:0.1
            size_hint_y:0.1
            on_press:app.root.current="contact_list"    
        ScrollView:
            Label:
                id: chat_messages
                text: "Chat messages will appear here..."
        BoxLayout:
            spacing: dp(10)
            TextInput:
                id: chat_input
                hint_text: "Type your message..."
            Button:
                text: "Send"
                on_press: root.send_message()

<DieticianScreen>:
    name: "Dietician"
    BoxLayout:
        orientation: "vertical"
        spacing: 10
        padding: 20

        Label:
            text: "Enter your name:"
        TextInput:
            id: name_input
            hint_text: "Your Name"

        Label:
            text: "Select your dietary preference:"
        Spinner:
            id: preference_spinner
            text: "Choose One"
            values: ["Vegetarian", "Vegan", "Keto", "Paleo", "Omnivorous"]

        Label:
            text: "List your allergies (comma-separated):"
        TextInput:
            id: allergies_input
            hint_text: "e.g., nuts, dairy"

        Label:
            text: "Select your health goal:"
        Spinner:
            id: goal_spinner
            text: "Choose One"
            values: ["Weight Loss", "Muscle Gain", "General Health"]

        Button:
            text: "Get Meal Suggestion"
            size_hint: (1, 0.2)
            on_press: root.generate_suggestion()

        Button:
            text: "Back to Home"
            on_press: app.root.current = "home"


#        Button:
#            text:"Close"
#            size_hint_y:None
#            height:'40dp'
#            background_color: 0.129, 0.604, 0.953, 1  
#            bold:True
#            on_press:self.dismiss            